# A0146123R
###### /java/guitests/ChangeCommandTest.java
``` java
/**
 * gui tests for change command.
 */
public class ChangeCommandTest extends TaskManagerGuiTest {
    private static String newFile = "./src/test/data/XmlAddressBookStorageTest/newFile.xml";
    private static String sampleData = TestUtil.getFilePathInSandboxFolder("sampleData.xml");

    @Test
    public void change_invalidCommand_fail() {
        commandBox.runCommand("change dummyfile");
        assertResultMessage(ChangeCommand.MESSAGE_INVALID_FILE_PATH);
        commandBox.runCommand("change " + sampleData + " clean");
        assertResultMessage(ChangeCommand.MESSAGE_INVALID_CLEAR_DATA);
    }

    @Test
    public void change_validCommand_success() throws Exception {
        assertTrue(taskListPanel.isListMatching(td.getTypicalTasks()));

        // verify that the storage location can be changed
        assertChangeCommandSuccess(newFile);
        assertChangeClearCommandSuccess(newFile, sampleData);

        // verify other commands can work after a change command
        commandBox.runCommand(td.project.getAddCommand());
        assertListSize(9);
        assertStorageFileSame(new File(sampleData));
    }

    /**
     * Runs the change command to change the storage location and confirms the
     * new storage location is correct.
     */
    private void assertChangeCommandSuccess(String newFilePath) throws Exception {
        commandBox.runCommand("change " + newFilePath);
        assertResultMessage("Storage location changed: " + newFilePath);
        assertTrue(taskListPanel.isListMatching(td.getTypicalTasks()));
        assertStorageFileSame(new File(newFilePath));
    }

    /**
     * Runs the change command to change the storage location and clear data
     * saved in the previous location and confirms the new storage location is
     * correct.
     */
    private void assertChangeClearCommandSuccess(String previousFilePath, String newFilePath) throws Exception {
        commandBox.runCommand("change " + newFilePath + " clear");
        assertChangeCommandSuccess(newFilePath);
        assert !new File(previousFilePath).exists();
    }

}
```
###### /java/guitests/CommandBoxTest.java
``` java
    @Test
    public void commandBox_default_autoFocus(){
        assertTrue(commandBox.isFocused());
    }

}
```
###### /java/guitests/DoneCommandTest.java
``` java

/**
 * test for done command execution on gui
 * @author LiXiaowei
 * 
 * use scenarios: 1) mark a task as done by index as the last shown list
 *                2) mark a task as done by name
 *
 */

public class DoneCommandTest extends TaskManagerGuiTest {
    
    TestTask[] currentList;
    
    @Before
    public void setUpLists(){
        currentList=td.getTypicalTasks();
    }
    
    //---------------------------------valid cases--------------------------------------------

    //test for scenario1: mark done by index
    
    @Test
    public void markDoneByIndex_successful() {
        
        currentList[0].markAsDone();
        assertDoneSuccess("done 1", currentList);
        
    }
    
    //test for scenario 2: mark done by name
    
    @Test
    public void markDoneByName_successful(){
        
        // Mark task as done by name
        currentList[4].markAsDone();
        commandBox.runCommand("done Work");
        assertResultMessage(DoneCommand.MULTIPLE_TASK_SATISFY_KEYWORD);
        assertDoneSuccess("done 1", currentList);
        
        // Mark task as done by name with multiple satisfied
        currentList[2].markAsDone();
        commandBox.runCommand("done friends");
        assertResultMessage(DoneCommand.MULTIPLE_TASK_SATISFY_KEYWORD);
        assertDoneSuccess("done 3", currentList);
        
        
    }
    
    //-------------------------------------invalid cases---------------------------------------
    
    //test for invalid index
    
    @Test
    public void markDoneByInvalidIndex_fail(){
        commandBox.runCommand("done 12");
        assertResultMessage(Messages.MESSAGE_INVALID_TASK_DISPLAYED_INDEX);
        
    }
    
    //test for nonexistant name
    
    @Test
    public void markDoneByNonExistantName_fail(){
        
        commandBox.runCommand("done dinner");
        assertResultMessage(DoneCommand.TASK_NOT_FOUND);
    }

    private void assertDoneSuccess(String command, TestTask... currentList) {
        commandBox.runCommand(command);
        assertTrue(taskListPanel.isListMatching(currentList));
    }

}
```
###### /java/guitests/FilterCommandTest.java
``` java
/**
 * gui tests for filter command.
 */
public class FilterCommandTest extends TaskManagerGuiTest {

    @Test
    public void filter_nonEmptyList_success() {
        assertFilterResult("filter d/12.10.2016"); // no results
        assertFilterResult("filter d/11.10.2016", td.friendEvent, td.lunch, td.work, td.movie); 
        assertFilterResult("filter s/11.10.2016", td.meeting, td.travel);
        assertFilterResult("filter e/11.10.2016-12", td.meeting);
        assertFilterResult("filter t/friends", td.friend, td.friendEvent, td.lunch);
        assertFilterResult("filter p/1", td.lunch);

        // filter after add one result
        TestTask taskToAdd = td.lecture;
        commandBox.runCommand(taskToAdd.getAddCommand());
        assertFilterResult("filter r/weekly", taskToAdd);

    }

    @Test
    public void filter_emptyList_success() {
        commandBox.runCommand("clear");
        assertFilterResult("filter d/11.10.2016"); // no results
    }

    @Test
    public void filter_invalidCommand_fail() {
        commandBox.runCommand("filterd/11.10.2016");
        assertResultMessage(Messages.MESSAGE_UNKNOWN_COMMAND);
        commandBox.runCommand("filter");
        assertResultMessage(String.format(MESSAGE_INVALID_COMMAND_FORMAT, FilterCommand.MESSAGE_USAGE));
        commandBox.runCommand("filter d/ddd");
        assertResultMessage(Deadline.MESSAGE_DEADLINE_CONSTRAINTS);
    }

    /**
     * Runs the filter command to filter the list and confirms the filtered list
     * is correct.
     */
    private void assertFilterResult(String command, TestTask... expectedHits) {
        commandBox.runCommand(command);
        assertListSize(expectedHits.length);
        assertResultMessage(expectedHits.length + " events and tasks listed!");
        assertTrue(taskListPanel.isListMatching(expectedHits));
    }

}
```
###### /java/guitests/FilterPanelTest.java
``` java
/**
 * gui tests for filter panel.
 */
public class FilterPanelTest extends TaskManagerGuiTest {

    @Test
    public void filterPanel_runCommandForButton_buttonStays() {
        filterPanel.runCommandForEvent();
        assertTrue(filterPanel.getEventInput());
        assertTrue(commandBox.isFocused());
    }

    @Test
    public void filterPanel_runCommandForTextfield_textStays() {
        filterPanel.runCommandForDeadline("3.12.2016");
        assertEquals("3.12.2016", filterPanel.getDeadlineInput());
        assertTrue(commandBox.isFocused());
    }

    @Test
    public void filter_runCommandForChoiceBox_choiceBoxStays() {
        filterPanel.runCommandForPriority("2");
        assertEquals(filterPanel.getPriorityInput(), "2");
        assertTrue(commandBox.isFocused());
    }

    @Test
    public void update_listCommand_buttonUpdates() {
        commandBox.runCommand("list tasks");
        assertTrue(filterPanel.getTaskInput());
        commandBox.runCommand("list events");
        assertTrue(filterPanel.getEventInput());
        assertFalse(filterPanel.getTaskInput());
        commandBox.runCommand("list done");
        assertTrue(filterPanel.getDoneInput());
        commandBox.runCommand("list undone");
        assertTrue(filterPanel.getUndoneInput());
        commandBox.runCommand("list");
        assertFalse(filterPanel.getEventInput() || filterPanel.getTaskInput() || filterPanel.getDoneInput()
                || filterPanel.getUndoneInput());
    }

    @Test
    public void updatee_filterCommand_textFieldUpdates() {
        commandBox.runCommand("filter d/06.11.2016 t/tag");
        assertEquals("06.11.2016", filterPanel.getDeadlineInput());
        assertEquals("tag", filterPanel.getTagInput());
        commandBox.runCommand("filter s/06.11.2016-12 e/06.11.2016-16");
        assertEquals("06.11.2016-12", filterPanel.getStartDateInput());
        assertEquals("06.11.2016-16", filterPanel.getEndDateInput());
        commandBox.runCommand("filter r/daily p/3");
        assertEquals("daily", filterPanel.getRecurringInput());
        assertEquals("3", filterPanel.getPriorityInput());
    }

    @Test
    public void filter_events_successs() {
        filterPanel.runCommandForEvent();
        assertFilterSuccess(td.meeting, td.travel);
        filterPanel.runCommandForEvent(); // Click twice to disable the button
        assertFilterSuccess(td.getTypicalTasks());
    }

    @Test
    public void filter_tasks_success() {
        filterPanel.runCommandForTask();
        assertFilterSuccess(td.friend, td.friendEvent, td.lunch, td.book, td.work, td.movie);
        filterPanel.runCommandForTask(); // Click twice to disable the button
        assertFilterSuccess(td.getTypicalTasks());
    }

    @Test
    public void filter_done_success() {
        commandBox.runCommand("done 1");
        td.friend.markAsDone();
        filterPanel.runCommandForDone();
        assertFilterSuccess(td.friend);
        filterPanel.runCommandForDone(); // Click twice to disable the button
        assertFilterSuccess(td.getTypicalTasks());
    }

    @Test
    public void filter_undone_success() {
        commandBox.runCommand("done 1");
        td.friend.markAsDone();
        filterPanel.runCommandForUndone();
        assertFilterSuccess(td.friendEvent, td.lunch, td.book, td.work, td.movie, td.meeting, td.travel);
        filterPanel.runCommandForUndone(); // Click twice to disable the button
        assertFilterSuccess(td.getTypicalTasks());
    }

    @Test
    public void filter_invaliidTextFieldInput_fail() {
        commandBox.runCommand("list tasks");
        TestTask[] tasks = { td.friend, td.friendEvent, td.lunch, td.book, td.work, td.movie };

        filterPanel.runCommandForDeadline("hi");
        assertFilterFail(Deadline.MESSAGE_DEADLINE_CONSTRAINTS, tasks);

        filterPanel.runCommandForDeadline("");
        filterPanel.runCommandForStartDate("hi");
        assertFilterFail(EventDate.MESSAGE_EVENT_DATE_CONSTRAINTS, tasks);

        filterPanel.runCommandForStartDate("");
        filterPanel.runCommandForEndDate("hi");
        assertFilterFail(EventDate.MESSAGE_EVENT_DATE_CONSTRAINTS, tasks);

        filterPanel.runCommandForEndDate("");
        filterPanel.runCommandForRecurring("hi");
        assertFilterFail(Recurring.MESSAGE_RECURRING_CONSTRAINTS, tasks);
    }

    @Test
    public void filter_deadline_success() {
        filterPanel.runCommandForDeadline("11.10.2016-16");
        assertFilterSuccess(td.movie);
        filterPanel.runCommandForDeadline("nil");
        assertFilterSuccess(td.friend, td.book);
        filterPanel.runCommandForDeadline("");
        assertFilterSuccess(td.getTypicalTasks());
    }

    @Test
    public void filter_startDate_success() {
        filterPanel.runCommandForStartDate("11.10.2016");
        assertFilterSuccess(td.meeting, td.travel);
        filterPanel.runCommandForStartDate("");
        assertFilterSuccess(td.getTypicalTasks());
    }

    @Test
    public void filter_endDate_success() {
        filterPanel.runCommandForEndDate("15.10.2016");
        assertFilterSuccess(td.travel);
        filterPanel.runCommandForEndDate("");
        assertFilterSuccess(td.getTypicalTasks());
    }

    @Test
    public void filter_recurring_success() {
        commandBox.runCommand(td.lecture.getAddCommand());
        filterPanel.runCommandForRecurring("weekly");
        assertFilterSuccess(td.lecture);
    }

    @Test
    public void filter_tag_success() {
        filterPanel.runCommandForTag("friends");
        assertFilterSuccess(td.friend, td.friendEvent, td.lunch);
        filterPanel.runCommandForTag("");
        assertFilterSuccess(td.getTypicalTasks());
    }

    @Test
    public void filter_priority_success() {
        filterPanel.runCommandForPriority("1");
        assertFilterSuccess(td.lunch);
        filterPanel.runCommandForPriority("");
        assertFilterSuccess(td.getTypicalTasks());
    }

    @Test
    public void filter_integral_success() {
        filterPanel.runCommandForTag("friends");
        assertFilterSuccess(td.friend, td.friendEvent, td.lunch);
        filterPanel.runCommandForEvent();
        assertFilterSuccess();
        filterPanel.runCommandForTag("");
        assertFilterSuccess(td.meeting, td.travel);
        filterPanel.runCommandForDone();
        assertFilterSuccess();
        filterPanel.runCommandForUndone();
        assertFilterSuccess(td.meeting, td.travel);
        filterPanel.runCommandForStartDate("11.10.2016-10");
        assertFilterSuccess(td.meeting);
        filterPanel.runCommandForEndDate("12.10.2016");
        assertFilterSuccess();
        filterPanel.runCommandForStartDate("");
        filterPanel.runCommandForEndDate("");
        filterPanel.runCommandForTask();
        assertFilterSuccess(td.friend, td.friendEvent, td.lunch, td.book, td.work, td.movie);
        filterPanel.runCommandForDeadline("11.10.2016-12");
        assertFilterSuccess(td.lunch);
    }

    private void assertFilterSuccess(TestTask... expectedHits) {
        assertFilterResult(expectedHits);
        assertResultMessage(FilterPanel.SUCCESS_FILTER);
    }

    private void assertFilterFail(String message, TestTask... expectedHits) {
        assertFilterResult(expectedHits);
        assertResultMessage(FilterPanel.INVALID_FILTER + message);
    }

    private void assertFilterResult(TestTask... expectedHits) {
        assertListSize(expectedHits.length);
        assertTrue(taskListPanel.isListMatching(expectedHits));
    }

}
```
###### /java/guitests/FindCommandTest.java
``` java
    @Test
    public void find_advancedCommand() {
        assertFindResult("find project meeting", td.friend, td.friendEvent, td.meeting); // OR operator
                                                                                         //near match search
        assertFindResult("find meet AND friend", td.friend, td.friendEvent); // AND operator
        assertFindResult("find meet AND friend exact!"); // AND operator and exact! parameter
        assertFindResult("find exact! meet", td.friend, td.friendEvent); // exact! parameter
    }

```
###### /java/guitests/guihandles/CommandBoxHandle.java
``` java
    public boolean isFocused() {
        return isFocused(COMMAND_INPUT_FIELD_ID);
    }
}
```
###### /java/guitests/guihandles/FilterPanelHandle.java
``` java
/**
 * A handle to the Filter Panel in the GUI.
 */
public class FilterPanelHandle extends GuiHandle{

    private static final String EVENT_INPUT_FIELD_ID = "#eventsToggleButton";
    private static final String TASKS_INPUT_FIELD_ID = "#tasksToggleButton";
    private static final String DONE_INPUT_FIELD_ID = "#doneToggleButton";
    private static final String UNDONE_INPUT_FIELD_ID = "#undoneToggleButton";
    private static final String DEADLINE_INPUT_FIELD_ID = "#deadlineTextField";
    private static final String START_DATE_INPUT_FIELD_ID = "#startDateTextField";
    private static final String END_DATE_INPUT_FIELD_ID = "#endDateTextField";
    private static final String RECURRING_INPUT_FIELD_ID = "#recurringTextField";
    private static final String TAG_INPUT_FIELD_ID = "#tagsTextField";
    private static final String PRIORITY_INPUT_FIELD_ID = "#priorityChoiceBox";

    public FilterPanelHandle(GuiRobot guiRobot, Stage primaryStage) {
        super(guiRobot, primaryStage, TestApp.APP_TITLE);
    }
    
    /**
     * Get the given inputs in the Filter Panel
     */
    public boolean getEventInput() {
        return getToggleButtonInput(EVENT_INPUT_FIELD_ID);
    }
    
    public boolean getTaskInput() {
        return getToggleButtonInput(TASKS_INPUT_FIELD_ID);
    }
    
    public boolean getDoneInput() {
        return getToggleButtonInput(DONE_INPUT_FIELD_ID);
    }
    
    public boolean getUndoneInput() {
        return getToggleButtonInput(UNDONE_INPUT_FIELD_ID);
    }
     
    public String getDeadlineInput() {
        return getTextFieldText(DEADLINE_INPUT_FIELD_ID);
    }
    
    public String getStartDateInput() {
        return getTextFieldText(START_DATE_INPUT_FIELD_ID); 
    }
    
    public String getEndDateInput() {
        return getTextFieldText(END_DATE_INPUT_FIELD_ID); 
    }
    
    public String getRecurringInput() {
        return getTextFieldText(RECURRING_INPUT_FIELD_ID); 
    }
    
    public String getTagInput() {
        return getTextFieldText(TAG_INPUT_FIELD_ID).trim();
    }
    
    public String getPriorityInput() {
        return getPriorityInput(PRIORITY_INPUT_FIELD_ID);
    }
    
    /**
     * Enter the given commands in the Filter Panel
     */
    public void runCommandForEvent() {
        enterCommandForEvents();
        guiRobot.sleep(200); //Give time for the command to take effect
    }
    
    public void runCommandForTask() {
        enterCommandForTasks();
        guiRobot.sleep(200);
    }
    
    public void runCommandForDone() {
        enterCommandForDone();
        guiRobot.sleep(200);
    }
    
    public void runCommandForUndone() {
        enterCommandForUndone();
        guiRobot.sleep(200);
    }
    
    public void runCommandForDeadline(String command) {
        enterCommandForDeadline(command);
        pressEnter();
        guiRobot.sleep(200);
    }
    
    public void runCommandForStartDate(String command) {
        enterCommandForStartDate(command);
        pressEnter();
        guiRobot.sleep(200); 
    }
    
    public void runCommandForEndDate(String command) {
        enterCommandForEndDate(command);
        pressEnter();
        guiRobot.sleep(200); 
    }
    
    public void runCommandForRecurring(String command) {
        enterCommandForRecurring(command);
        pressEnter();
        guiRobot.sleep(200); 
    }
    
    public void runCommandForTag(String command) {
        enterCommandForTag(command);
        pressEnter();
        guiRobot.sleep(200); 
    }
    
    public void runCommandForPriority(String command) {
        enterCommandForPriority(command);
        guiRobot.sleep(200); 
    }
    
    /**
     * Check the given fields in the Filter Panel are focused
     */
    public boolean deadlineIsFocused() {
        return isFocused(DEADLINE_INPUT_FIELD_ID);
    }
    
    public boolean startDateIsFocused() {
        return isFocused(START_DATE_INPUT_FIELD_ID);
    }
    
    public boolean endDateIsFocused() {
        return isFocused(END_DATE_INPUT_FIELD_ID);
    }
    
    public boolean recurringIsFocused() {
        return isFocused(RECURRING_INPUT_FIELD_ID);
    }
    
    public boolean tagIsFocused() {
        return isFocused(TAG_INPUT_FIELD_ID);
    }
    
    public boolean priorityIsFocused() {
        return choiceBoxIsFocused(PRIORITY_INPUT_FIELD_ID);
    }
    
    /**
     * For toggle buttons, enter command by click button
     */
    private void enterCommandForEvents() {
        clickToggleButton(EVENT_INPUT_FIELD_ID);
    }
    
    private void enterCommandForTasks() {
        clickToggleButton(TASKS_INPUT_FIELD_ID);
    }
    
    private void enterCommandForDone() {
        clickToggleButton(DONE_INPUT_FIELD_ID);
    }
    
    private void enterCommandForUndone() {
        clickToggleButton(UNDONE_INPUT_FIELD_ID);
    }

    /**
     * For text fields, enter command by set text field
     */
    private void enterCommandForDeadline(String command) {
        setTextField(DEADLINE_INPUT_FIELD_ID, command);
    }
    
    private void enterCommandForStartDate(String command) {
        setTextField(START_DATE_INPUT_FIELD_ID, command);
    }
    
    private void enterCommandForEndDate(String command) {
        setTextField(END_DATE_INPUT_FIELD_ID, command);
    }
    
    private void enterCommandForRecurring(String command) {
        setTextField(RECURRING_INPUT_FIELD_ID, command);
    }
    
    private void enterCommandForTag(String command) {
        setTextField(TAG_INPUT_FIELD_ID, command);
    }
    
    private void enterCommandForPriority(String command) {
        chooseChoiceBox(PRIORITY_INPUT_FIELD_ID, command);
    }
    
}
```
###### /java/guitests/guihandles/GuiHandle.java
``` java
    protected boolean getToggleButtonInput(String buttonId) {
        return ((ToggleButton) getNode(buttonId)).isSelected();
    }
    
    protected void clickToggleButton(String toggleButtonId) {
        guiRobot.clickOn(toggleButtonId);
        guiRobot.sleep(500); // so that the texts stays visible on the GUI for a short period
    }
    
    protected String getPriorityInput(String boxId) {
        return ((ChoiceBox<String>) getNode(boxId)).getSelectionModel().getSelectedItem().toString();
    }
    
    protected void chooseChoiceBox(String boxId, String newChoice) {
        Platform.runLater(() -> ((ChoiceBox<String>) getNode(boxId)).getSelectionModel().select(newChoice));
        guiRobot.sleep(500); // so that the texts stays visible on the GUI for a short period
    }
    
    protected boolean isFocused(String id) {
       return getNode(id).isFocused();
    }
    
    protected boolean choiceBoxIsFocused(String id) {
        return isFocused(id) && ((ChoiceBox<String>) getNode(id)).isShowing();
     }
```
###### /java/guitests/TaskManagerGuiTest.java
``` java
    /**
     * Asserts the size of the storage file is equal to the task list.
     */
    protected void assertStorageFileSame(File file) throws Exception {
        XmlSerializableTaskManager dataFromFile = XmlUtil.getDataFromFile(file, XmlSerializableTaskManager.class);
        assertEquals(taskListPanel.getNumberOfTasks(), dataFromFile.getTaskList().size());
    }
}
```
###### /java/guitests/UndoRedoChangeCommand.java
``` java
/**
 * gui tests for undo and redo change commands.
 */
public class UndoRedoChangeCommand extends TaskManagerGuiTest {
    private static String file1 = "./src/test/data/XmlAddressBookStorageTest/newFile1.xml";
    private static String file2 = "./src/test/data/XmlAddressBookStorageTest/newFile2.xml";
    private static String testData = TestUtil.getFilePathInSandboxFolder("sampleData.xml");

    @Test
    public void change_invalidCommand_fail() {
        commandBox.runCommand("undochange");
        assertResultMessage(UndoChangeCommand.MESSAGE_UNDO_FAILED);

        commandBox.runCommand("change " + testData);
        commandBox.runCommand("undochange d");
        assertResultMessage(UndoChangeCommand.MESSAGE_INVALID_CLEAR_DATA);

        commandBox.runCommand("redochange");
        assertResultMessage(RedoChangeCommand.MESSAGE_REDO_FAILED);
    }

    @Test
    public void undoRedoChange_validCommand_success() throws Exception {
        assertTrue(taskListPanel.isListMatching(td.getTypicalTasks()));
        commandBox.runCommand("change " + file1);
        commandBox.runCommand("change " + file2 + " clear");

        // verify that the change for storage location can be undone and redone
        // for multiple times
        assertUndoChangeCommandSuccess(file2, file1, true);
        assertUndoChangeCommandSuccess(file1, testData, true);

        assertRedoChangeCommandSuccess(testData, file1, true);
        assertRedoChangeCommandSuccess(file1, file2, false);

        assertUndoChangeCommandSuccess(file2, file1, false);
        assertUndoChangeCommandSuccess(file1, testData, false);

        // verify other commands can work after an undo/redochange command
        commandBox.runCommand(td.project.getAddCommand());
        assertListSize(9);
        assertStorageFileSame(new File(testData));
    }

    /**
     * Runs the undochange command to change back the storage location and clear
     * data saved in the current location if specified and confirms the new
     * storage location is correct.
     */
    private void assertUndoChangeCommandSuccess(String previousFilePath, String newFilePath, boolean isToClear)
            throws Exception {
        commandBox.runCommand("undochange " + (isToClear ? "" : "clear"));
        assertResultMessage("Storage location changed back.");
        assertChangeSusscess(previousFilePath, newFilePath, isToClear);
    }

    /**
     * Runs the redochange command to redo change the storage location and clear
     * data saved in the previous location if specified in the corresponding
     * change command and confirms the new storage location is correct.
     */
    private void assertRedoChangeCommandSuccess(String previousFilePath, String newFilePath, boolean shouldClear)
            throws Exception {
        commandBox.runCommand("redochange");
        assertResultMessage("Storage location changed.");
        assertChangeSusscess(previousFilePath, newFilePath, shouldClear);
    }

    private void assertChangeSusscess(String previousFilePath, String newFilePath, boolean previousFileExists)
            throws Exception {
        assertTrue(taskListPanel.isListMatching(td.getTypicalTasks()));
        assertStorageFileSame(new File(newFilePath));
        assert new File(previousFilePath).exists() == previousFileExists;
    }

}
```
###### /java/guitests/UndoRedoCommandTest.java
``` java
/**
 * gui tests for undo and redo commands
 */
public class UndoRedoCommandTest extends TaskManagerGuiTest {

    @Test
    public void undoRedo_invalidCommand_fail() {
        assertUndoFailed();
        assertRedoFailed();
    }

    @Test
    public void undo_exceedMaxTimes_fail() {
        for (int i = 0; i < 11; i++) {
            commandBox.runCommand("add n/dummy");
        }
        for (int i = 0; i < 10; i++) { // Undo up to 10 times
            commandBox.runCommand("undo");
        }
        assertListSize(9);
        assertUndoFailed();
        for (int i = 0; i < 10; i++) {
            commandBox.runCommand("redo");
        }
        assertListSize(19);
        assertRedoFailed();
    }

    @Test
    public void undoRedo_add_success() {
        TestTask taskToAdd = td.project;
        TestTask[] currentList = TestUtil.addTasksToList(td.getTypicalTasks(), taskToAdd);
        commandBox.runCommand(taskToAdd.getAddCommand());
        assertUndoRedoSuccess(currentList);
    }

    @Test
    public void undoRedo_clear_success() {
        commandBox.runCommand("clear");
        commandBox.runCommand("undo");
        assertUndoRedoClearSuccess();
    }

    @Test
    public void undoRedo_delete_success() {
        TestTask[] currentList = TestUtil.removeTaskFromList(td.getTypicalTasks(), 2);
        commandBox.runCommand("delete 2");
        assertUndoRedoSuccess(currentList);
    }

    @Test
    public void undoRedo_done_success() {
        TestTask[] currentList = td.getTypicalTasks();
        currentList[0].markAsDone();
        commandBox.runCommand("done 1");
        assertUndoRedoSuccess(currentList);
    }

    @Test
    public void undoRedo_edit_success() throws IllegalValueException {
        TestTask[] currentList = td.getTypicalTasks();
        Date newDate = new Deadline("05.11.2016");
        currentList[3].setDate(newDate);
        commandBox.runCommand("edit Read book d/05.11.2016");
        assertUndoRedoSuccess(currentList);
    }

    private void assertUndoFailed() {
        commandBox.runCommand("undo");
        assertResultMessage(UndoCommand.MESSAGE_UNDO_FAILED);
    }

    private void assertRedoFailed() {
        commandBox.runCommand("redo");
        assertResultMessage(RedoCommand.MESSAGE_REDO_FAILED);
    }

    /**
     * Runs the undo and redo command and confirms the result is correct.
     */
    private void assertUndoRedoSuccess(TestTask[] currentList) {
        commandBox.runCommand("undo");
        TestTask[] initialList = new TypicalTestTasks().getTypicalTasks();
        assertTrue(taskListPanel.isListMatching(initialList));
        commandBox.runCommand("redo");
        assertTrue(taskListPanel.isListMatching(currentList));
    }

    /**
     * Runs the undo and redo command for clear command and confirms the result
     * is correct.
     */
    private void assertUndoRedoClearSuccess() {
        commandBox.runCommand("undo");
        assertTrue(taskListPanel.isListMatching(td.getTypicalTasks()));
        commandBox.runCommand("redo");
        assertListSize(0);
    }

}
```
###### /java/seedu/toDoList/commons/util/DateUtilTest.java
``` java
/**
 * Tests the DateUtil methods.
 */
public class DateUtilTest {

    @Rule
    public ExpectedException thrown = ExpectedException.none();
    
    @Test
    public void isEmptyDate_emptyDate_true() {
        assertTrue(DateUtil.isEmptyDate(""));
    }
    
    @Test
    public void isEmptyDate_notEmptyDate_false() {
        assertFalse(DateUtil.isEmptyDate("0"));
    }
    
    @Test
    public void isValidDateFormat_validDateFormat_true() {
        assertTrue(DateUtil.isValidDateFormat("04.11.2016"));
        assertTrue(DateUtil.isValidDateFormat("04.11.2016-12"));
    }
    
    @Test
    public void isValidDateFormat_invalidDateFormat_false() {
        assertFalse(DateUtil.isValidDateFormat("4.11.2016"));
        assertFalse(DateUtil.isValidDateFormat("4 Nov"));
        assertFalse(DateUtil.isValidDateFormat("hi"));
    }

    @Test
    public void parseDate_validDate_success() {
        assertEquals("04.11.2016", DateUtil.parseDate("04.11.2016"));
        assertEquals("04.11.2016", DateUtil.parseDate("4.11.2016"));
        assertEquals("04.11.2016-10", DateUtil.parseDate("04.11.2016-10"));
        assertEquals("04.11.2016-10", DateUtil.parseDate("4.11.2016-10"));
        assertEquals("04.11.2016", DateUtil.parseDate("4 Nov"));
        assertEquals("04.11.2016-10", DateUtil.parseDate("4 Nov 10am"));
        assertEquals("04.11.2016-10", DateUtil.parseDate("2016-11-04 10am"));
    }

    @Test
    public void parseDate_invalidDate_fail(){
        thrown.expect(IndexOutOfBoundsException.class);
        DateUtil.parseDate("hi");
    }
}
```
###### /java/seedu/toDoList/logic/ChangeCommandTest.java
``` java
/**
 * Responsible for testing the correct execution of ChangeCommand and its undo and redo
 */
public class ChangeCommandTest extends CommandTest{
    
    /*
     * ChangeCommmand format: change FILE_PATH [clear]
     * 
     * UndoChangeCommand format: undochange [clear]
     * 
     * RedoChangeCommand format: redochange
     * 
     * Equivalence partitions for file path: invalid path, valid path
     * 
     * Equivalence partitions for clear argument: absent, "clear", invalid clear argument (any other string)
     */
   //-------------------------test for invalid commands------------------------------------------------
    
    @Test
    public void change_invalidArgsFormat_errorMessageShown() throws Exception {
        String expectedMessage = String.format(MESSAGE_INVALID_COMMAND_FORMAT, ChangeCommand.MESSAGE_USAGE);
        assertAbsenceKeywordFormatBehaviorForCommand("change", expectedMessage);
        assertCommandBehavior("change a.xml clear b", expectedMessage);
    }
    
    @Test
    public void change_invalidFilePath_errorMessageShown() throws Exception{
        String expectedMessage = ChangeCommand.MESSAGE_INVALID_FILE_PATH;
        assertCommandBehavior("change !@#$%^&*", expectedMessage); 
        assertCommandBehavior("change a.txt", expectedMessage);
    }

    @Test
    public void change_invalidClearArg_errorMessageShown() throws Exception {
        assertCommandBehavior("change a.xml c", ChangeCommand.MESSAGE_INVALID_CLEAR_DATA);
    }
    
    @Test
    public void undoChange_invalidClearArg_errorMessageShown() throws Exception {
        assertCommandBehavior("undochange c", UndoChangeCommand.MESSAGE_INVALID_CLEAR_DATA);
    }
    
    /**
     * Confirms the 'no change command to undo' behavior for the undochange command
     */
    @Test
    public void undoChange_noChangeToUndo_errorMessageShown() throws Exception {
        assertCommandBehavior("undochange", UndoChangeCommand.MESSAGE_UNDO_FAILED);
    }
    
    /**
     * Confirms the 'no undo change command to redo' behavior for the redochange command
     */
    @Test
    public void redoChange_noUndoChangeToRedo_errorMessgeShown() throws Exception {
        assertCommandBehavior("redochange", RedoChangeCommand.MESSAGE_REDO_FAILED);
    }
    
    //------------------------------test for valid cases------------------------------------------------
    
    /*
     * As the change command, undochanage command and redochange command 
     * involve multiple components, they will be tested as system tests
     */
    
}
```
###### /java/seedu/toDoList/logic/UndoRedoCommandTest.java
``` java
/**
 * Responsible for testing the correct execution of UndoCommand and RedoCommand
 */
public class UndoRedoCommandTest extends CommandTest {

    /*
     * UndoCommand format: undo
     * 
     * RedoCommand format: redo
     */
    // -------------------------test for invalid commands------------------------------------------------

    @Test
    public void undo_noCommandToUndo_errorMessageShown() throws Exception {
        assertCommandBehavior("undo", UndoCommand.MESSAGE_UNDO_FAILED);
    }

    @Test
    public void redo_noCommandToRedo_errorMessageShown() throws Exception {
        assertCommandBehavior("redo", RedoCommand.MESSAGE_REDO_FAILED);
    }

    // ------------------------------test for valid cases------------------------------------------------
    /*
     * Valid test scenarios
     * 
     * Possible scenarios: 
     * - Undo/Redo add command 
     * - Undo/Redo clear command 
     * - Undo/Redo delete command 
     * - Undo/Redo done command 
     * - Undo/Redo edit command
     *
     * As the undo and redo commands depend on other commands,
     * they will be tested as system tests
     */
    
}
```
###### /java/seedu/toDoList/model/DateTest.java
``` java
/**
 * Tests Deadline and EventDate.
 */
public class DateTest {
    
    @Rule
    public ExpectedException thrown = ExpectedException.none();
    
    @Test
    public void addDeadline_validDate_success() throws IllegalValueException {
        Deadline d1 = new Deadline("");
        assertEquals("", d1.getValue());
        Deadline d2 = new Deadline("04.11.2016");
        assertEquals("04.11.2016", d2.getValue());
        Deadline d3 = new Deadline("4 Nov");
        assertEquals("04.11.2016", d3.getValue());
    }
    
    @Test
    public void addDeadline_invalidDate_fail() throws IllegalValueException {
        thrown.expect(IllegalValueException.class);
        new Deadline("hi");
    }
    
    @Test
    public void addEventDate_validDate_success() throws IllegalValueException {
        EventDate d1 = new EventDate("04.11.2016-10", "04.11.2016-11");
        assertEquals("04.11.2016-10 to 04.11.2016-11", d1.getValue());
        EventDate d2 = new EventDate("4 Nov 10am", "4 Nov 11am");
        assertEquals("04.11.2016-10 to 04.11.2016-11", d2.getValue());
    }
    
    @Test
    public void addEventDate_invalidStartDate_fail() throws IllegalValueException {
        thrown.expect(IllegalValueException.class);
        new EventDate("hi", "04.11.2016-11");
    }
    
    @Test
    public void addEventDate_invalidEndDate_fail() throws IllegalValueException {
        thrown.expect(IllegalValueException.class);
        new EventDate("04.11.2016-10", "hi");
    }
     
}
```
###### /java/seedu/toDoList/storage/XmlTaskManagerStorageTest.java
``` java
    @Test
    public void setTaskManagerFilePath_nullFilePath_assertionFailure() throws IOException {
        thrown.expect(AssertionError.class);
        setTaskManagerFilePath(null);
    }

    @Test
    public void setTaskManagerFilePath_validFilePath_success() throws IOException {
        assertTrue(setTaskManagerFilePath(new FilePath("SomeFile.xml", false)));
        assertFalse(setTaskManagerFilePath(new FilePath("SomeFile.xml", true)));
    }

    private boolean setTaskManagerFilePath(FilePath filePath) throws IOException {
        String defaultFilePath = testFolder.getRoot().getPath() + "TempAddressBook.xml";
        TypicalTestTasks td = new TypicalTestTasks();
        TaskManager original = td.getTypicalTaskManager();
        XmlTaskManagerStorage xmlTaskManagerStorage = new XmlTaskManagerStorage(defaultFilePath);
        xmlTaskManagerStorage.saveTaskManager(original, defaultFilePath);

        xmlTaskManagerStorage.setTaskManagerFilePath(filePath);
        assertEquals(filePath.getPath(), xmlTaskManagerStorage.getTaskManagerFilePath());
        return new File(defaultFilePath).exists();
    }

}
```
###### /java/seedu/toDoList/testutil/TypicalTestTasks.java
``` java
    public TypicalTestTasks() {
        try {
            friend =  new TaskBuilder().withName("Meet old friends").withDeadline("")
                    .withTags("friends").build();
            friendEvent=new TaskBuilder().withName("Meet old friends").withDeadline("11.10.2016")
            		.withTags("friends").build();
            lunch = new TaskBuilder().withName("Eat lunch with friends").withDeadline("11.10.2016-12")
                    .withTags("lunch", "friends").withPriority(1).build();
            book = new TaskBuilder().withName("Read book").withDeadline("").build();
            work = new TaskBuilder().withName("Work").withDeadline("11.10.2016").build();
            movie = new TaskBuilder().withName("Watch movie").withDeadline("11.10.2016-16").build();
            meeting = new TaskBuilder().withName("Project meeting").withEventDate("11.10.2016-10", "11.10.2016-12").withTags("Project").build();
            travel = new TaskBuilder().withName("Travel").withEventDate("11.10.2016", "15.10.2016").build();

 
            //Manually added
            project = new TaskBuilder().withName("Project due").withDeadline("11.10.2016").withTags("Project").build();
            workshop = new TaskBuilder().withName("Attend workshop").withEventDate("11.10.2016-10", "11.10.2016-16").build();
            lecture=new TaskBuilder().withName("CS2103 Lecture").withEventDate("14.10.2016-14", "14.10.2016-16").withRecurringFrequency("weekly").build();
            swimming=new TaskBuilder().withName("Swimming Course").withDeadline("01.01.2016").withRecurringFrequency("daily").build();
            teaching=new TaskBuilder().withName("teach my sister math").withDeadline("01.01.2016").withRecurringFrequency("monthly").build();
            
            //Used to verify recurring data only
            lectureVerifier=new TaskBuilder().withName("CS2103 Lecture").withEventDate(TestUtil.getNextFriday()+"-14", TestUtil.getNextFriday()+"-16").withRecurringFrequency("weekly").build();
            swimmingVerifier=new TaskBuilder().withName("Swimming Course").withDeadline(DateUtil.getFormattedDateString(DateUtil.getCurrentLocalDate())).withRecurringFrequency("daily").build();
            teachingVerifier=new TaskBuilder().withName("teach my sister math").withDeadline(TestUtil.getNextMonthDate("01.01.2016")).withRecurringFrequency("monthly").build();
        } catch (IllegalValueException e) {
            e.printStackTrace();
            assert false : "not possible";
        }
    }

    public static void loadTaskManagerWithSampleData(TaskManager ab) {
            ab.addTask(new Task(friend));
            ab.addTask(new Task(friendEvent));
            ab.addTask(new Task(lunch));
            ab.addTask(new Task(book));
            ab.addTask(new Task(work));
            ab.addTask(new Task(movie));
            ab.addTask(new Task(meeting));
            ab.addTask(new Task(travel));
    }

    public TestTask[] getTypicalTasks() {
        return new TestTask[]{friend, friendEvent,lunch, book, work, movie, meeting, travel};
    }
```
